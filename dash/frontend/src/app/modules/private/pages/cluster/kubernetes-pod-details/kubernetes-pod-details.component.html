<div class="page-container">
  <div class="page-container-content">
    <div class="page-title-button-group-spacing adjust-height">
      <div class="content-breadcrumbs">
        <ol class="breadcrumb">
          <li class="breadcrumb-item">
            <a class="link" href="/private/clusters/{{clusterId}}/kubernetes-namespaces">
              namespaces
            </a>
          </li>
          <li class="breadcrumb-item">
            {{namespace}}
          </li>
          <li class="breadcrumb-item">
            <a class="link" href="/private/clusters/{{clusterId}}/kubernetes-namespaces/{{namespace}}/pods">
              pods
            </a>
          </li>
          <li class="breadcrumb-item">
            {{podName}}
          </li>
        </ol>
        <p class="page-title">Images in Pod {{podName}}</p>
      </div>

      <div class="pod-page-buttons row">
        <div class="col-xs-12 col-md-6">
          <button
            mat-fab
            class="action-button" type="button"
            (click)="getViolations()">
            <img src="assets/images/opa-icon.png" alt="OPA"/>
          </button>
          <button
            mat-fab
            class="action-button" type="button"
            (click)="runKubesec()">
            <img src="assets/images/kubesec-logo.png" alt="kubesec"/>
          </button>
        </div>
        <div class="calendar-date-picker col-xs-12 col-md-6">
          <app-datepicker-component (newDateSelected)="dateChanged($event)" [allowFutureDate]="false"></app-datepicker-component>
        </div>
      </div>
    </div>
    <mat-card>
      <div class="page-table k8-adjust-height">
        <mat-table [dataSource]="dataSource" matSort>
          <ng-container matColumnDef="name">
            <mat-header-cell *matHeaderCellDef mat-sort-header> Name </mat-header-cell>
            <mat-cell *matCellDef="let element">
              <a [routerLink]="['/private', 'clusters', this.clusterId, 'images', 'image-scan', element?.id]">
                {{element?.name}}
              </a>
            </mat-cell>
          </ng-container>
          <ng-container matColumnDef="summary">
            <mat-header-cell *matHeaderCellDef mat-sort-header> Summary </mat-header-cell>
            <mat-cell *matCellDef="let element">
              <a [routerLink]="['/private', 'clusters', this.clusterId, 'images', 'image-scan', element?.id]">
                {{element.summary}}
              </a>
            </mat-cell>
          </ng-container>
          <ng-container matColumnDef="lastScanned">
            <mat-header-cell *matHeaderCellDef mat-sort-header> Last Scanned </mat-header-cell>
            <mat-cell *matCellDef="let element">
              <a [routerLink]="['/private', 'clusters', this.clusterId, 'images', 'image-scan', element?.id]">
                <ng-container *ngIf="element?.lastScanned !== null; else notScannedYet">
                  {{formatDate.parseTimestampToLocalTimestamp(element.lastScanned) | date: 'MM/dd/yyyy hh:mma'}}
                </ng-container>
                <ng-template #notScannedYet>N/A</ng-template>
              </a>
            </mat-cell>
          </ng-container>
          <ng-container matColumnDef="compliant">
            <mat-header-cell *matHeaderCellDef mat-sort-header> Compliance </mat-header-cell>
            <mat-cell *matCellDef="let element">
              {{element?.scanResults ? element.scanResults : 'Not Yet Scanned'}}
            </mat-cell>
          </ng-container>
          <mat-header-row ></mat-header-row>
          <mat-header-row *matHeaderRowDef="displayedColumns"></mat-header-row>
          <mat-row *matRowDef="let row; columns: displayedColumns;" class="table-row"></mat-row>
        </mat-table>
      </div>
      <mat-paginator class="pb-xs-3" [pageSizeOptions]="[10, 20, 50, 100]" showFirstLastButtons></mat-paginator>
    </mat-card>
  </div>
</div>
